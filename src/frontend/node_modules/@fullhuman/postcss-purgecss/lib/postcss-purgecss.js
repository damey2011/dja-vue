"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var postcss=_interopDefault(require("postcss")),PurgeCSS=require("purgecss"),PurgeCSS__default=_interopDefault(PurgeCSS);const purgeCSSPlugin=postcss.plugin("postcss-plugin-purgecss",(function(e){return async function(t,s){const o=new PurgeCSS__default,r={...PurgeCSS.defaultOptions,...e};e&&"function"==typeof e.contentFunction&&(r.content=e.contentFunction(t.source&&t.source.input.file||"")),o.options=r;const{content:n,extractors:u}=r,c=n.filter(e=>"string"==typeof e),i=n.filter(e=>"object"==typeof e),p=await o.extractSelectorsFromFiles(c,u),a=await o.extractSelectorsFromString(i,u),l=PurgeCSS.mergeExtractorSelectors(p,a);o.walkThroughCSS(t,l),o.options.fontFace&&o.removeUnusedFontFaces(),o.options.keyframes&&o.removeUnusedKeyframes(),o.options.variables&&o.removeUnusedCSSVariables(),o.options.rejected&&o.selectorsRemoved.size>0&&(s.messages.push({type:"purgecss",plugin:"postcss-purgecss",text:`purging ${o.selectorsRemoved.size} selectors:\n        ${Array.from(o.selectorsRemoved).map(e=>e.trim()).join("\n  ")}`}),o.selectorsRemoved.clear())}}));module.exports=purgeCSSPlugin;
